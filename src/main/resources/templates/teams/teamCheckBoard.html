<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<head>
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no" />
<title>Insert title here</title>
<link rel="stylesheet" href="/css/teamCheck.css" />
<script type="text/javascript">
	function complete(tno){
		alert("인증하기를 달성하셨습니다 개인 페이지에서 입금 내역을 확인하세요");
		location.href="/teams/completeCheck?tno=" +tno;
	}
</script>
<style type="text/css">
	ul {align-items: flex-end;}
</style>
</head>
<body class="homepage is-preload">
	<!-- 본문 코드 시작 -->
	<th:block layout:fragment="content">
		<div id="page-wrapper">
			<!-- Header -->
			<section id="header">
			<div class="container">
			
				<!-- Logo -->
				<h1 th:text="${team.teamName}"></h1>
				<p>for the sake of everyone's habits.</p>
			
				<!-- Nav -->
				<nav id="nav">
					<ul>
						<li id="introduce"><a th:href="@{/teams/teamPage(tno=${team.tno})}"><span>소개</span></a></li>
						<li id="ask"><a th:href="@{/teams/teamAskBoard(tno=${team.tno})}"><span>문의하기</span></a></li>
						<li id="check"><a th:href="@{/teams/teamCheckBoard(tno=${team.tno})}"><span>인증게시판</span></a></li>
						<li id="list"><a th:href="@{/teams/teamMemberList(tno=${team.tno})}"><span>가입 회원</span></a></li>
					</ul>
				</nav>							
			</div>
		</section>
			<!-- features -->
			<section id="features">
				<div class="container">					 
					<div class="card" th:each="checkBoards : ${checkBoards}">
						<div class="top">
							<div class="userDetails">
								<div class="profile_img">
									<img src="/images/logo.png" class="cover">
								</div>
								<div class="checkInfo">
									<h3 th:text="${team.teamName}"></h3>
									<h5 th:text="${checkBoards.member.nickname}"></h5>
									<h3 th:text="${#temporals.format(checkBoards.checkDate, 'yyyy-MM-dd hh:mm')}" class="span"></h3>
								</div>
							</div>
							<div>
								<a th:href="@{/teams/teamCheckBoard/teamCheckBoardDetail(cno=${checkBoards.cno}, tno=${team.tno})}"><img src="/images/go.png" class="dot"></a>
							</div>
						</div>
						<span th:each="photo : ${photoList}" th:if="${checkBoards.cno == photo.cno}">
							<div class="imgBx">
								<img th:src="${photo.realPhoto}" class="cover">
							</div>
						</span>
						<div class="actionBtns">
							<div class="left">
								<img src="/images/heart_red.png" class="heart">
								<h4 class="likes"></h4>
							</div>
							<div class="right">
								<span th:text="'조회수 : '+${checkBoards.checkReadCount}"></span>
							</div>
						</div>
						<h4 class="message" th:text="${checkBoards.checkContent}"></h4>
						<div th:each="memberCheckMap : ${memberCheckMap}" th:if="${checkBoards.member.mno == memberCheckMap.key}">
							<p th:text="'인증 남은 횟수 : ' + ${memberCheckMap.value} + ' / 10'"></p>
							<div th:if="${memberCheckMap.value} == 10">
								<a th:onclick="|javascript:complete('${team.tno}')|" class="btn">인증 완료</a>
							</div>
						</div>
					</div>

					
					<div th:if="${checkBoards.totalElements != 0}">
					<nav aria-label="Page navigation example">
						<ul class="pagination justify-content-center">
							<li class="page-item" th:classappend="${1 == checkBoards.pageable.pageNumber + 1} ? 'disabled'">
								<a class="page-link" href="#" th:href="@{/teams/teamCheckBoard(page=${checkBoards.pageable.pageNumber - 1}, tno=${team.tno})}"
								tabindex="-1" aria-disabled="true">Previous</a>
							</li>
							<li class="page-item"
								th:classappend="${i == checkBoards.pageable.pageNumber + 1} ? 'disabled'"
								th:each="i : ${#numbers.sequence(startPage, endPage)}">
								<a class="page-link" href="#" th:href="@{/teams/teamCheckBoard(page=${i - 1}, tno=${team.tno})}" th:text="${i}">1</a>
							</li>
							<li class="page-item" th:classappend="${checkBoards.totalPages == checkBoards.pageable.pageNumber + 1} ? 'disabled'">
								<a class="page-link" href="#" th:href="@{/teams/teamCheckBoard(page=${checkBoards.pageable.pageNumber + 1}, tno=${team.tno})}">Next</a>
							</li>
						</ul>
					</nav>					
					</div>
					
					<div align="center">
						<a th:href="@{/teams/teamCheckBoard/checkBoardWriteForm(tno=${team.tno})}" class="btn">인증하기</a>
					</div>
				</div>
			</section>
		</div>
	</th:block>
</body>
</html>