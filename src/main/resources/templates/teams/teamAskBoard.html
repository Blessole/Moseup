<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/layout}">
<head>
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no" />
<title>Insert title here</title>
<link rel="stylesheet" href="/css/teamAsk.css" />
<style type="text/css">
	ul {align-items: flex-end;}
</style>
<script type="text/javascript">
	function checkSecret(tno, tano){
		let username = $('#username').text();
		let writer = $('#writer'+tano).text();
		let leadername = $('#leadername').text();

		if((username == writer)||(username == leadername)){
			location.href="/teams/teamAskBoard/teamAskBoardDetail?tano="+tano+'&tno='+tno;			
		} else {
			alert('ì‘ì„±ìì™€ íŒ€ì¥ë§Œ ë³¼ ìˆ˜ ìˆì–´ìš”');
		}
	}
</script>
</head>
<body class="homepage is-preload">
	<!-- ë³¸ë¬¸ ì½”ë“œ ì‹œì‘ -->
	<th:block layout:fragment="content">
		<div id="page-wrapper">
			<!-- Header -->
		<section id="header">
			<div class="container">
			
				<!-- Logo -->
				<h1 th:text="${team.teamName}"></h1>
				<p>for the sake of everyone's habits.</p>
			
				<!-- Nav -->
				<nav id="nav">
					<ul>
						<li id="introduce"><a th:href="@{/teams/teamPage(tno=${team.tno})}"><span>ì†Œê°œ</span></a></li>
						<li id="ask"><a th:href="@{/teams/teamAskBoard(tno=${team.tno})}"><span>ë¬¸ì˜í•˜ê¸°</span></a></li>
						<li id="check"><a th:href="@{/teams/teamCheckBoard(tno=${team.tno})}"><span>ì¸ì¦ê²Œì‹œíŒ</span></a></li>
						<li id="list"><a th:href="@{/teams/teamMemberList(tno=${team.tno})}"><span>ê°€ì… íšŒì›</span></a></li>
					</ul>
				</nav>						
			</div>
		</section>
		<br>
			<!-- checkBoard -->
			<section id="features">
				<div class="container">
					<h2 class="text-primary" align="center">ë¬¸ì˜ê¸€ ëª©ë¡</h2>
					<div hidden="hidden" id="username" th:text="${member.nickname}"></div>
					<div hidden="hidden" id="leadername" th:text="${team.teamLeader}"></div>				
					<table class="table table-striped">
						<thead>
							<tr>
								<th>ê¸€ë²ˆí˜¸</th>
								<th>ì œëª©</th>
								<th>ì‘ì„±ì</th>
								<th>ì‘ì„±ì¼</th>
								<th>ì¡°íšŒìˆ˜</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="teamaskboard : ${teamAsks}">
							<div th:if="${teamaskboard.teamAskDelete.toString != 'TRUE'}">											
								<th th:text="${teamaskboard.tano}"></th>							
								<th th:if="${teamaskboard.secret.toString != 'PUBLIC'}">
									<a href="#" th:text="'ğŸ”’'+${teamaskboard.teamAskSubject}" th:onclick="|javascript:checkSecret('${team.tno}','${teamaskboard.tano}')|" style="text-decoration: none;"></a></th>							
								<th th:if="${teamaskboard.secret.toString == 'PUBLIC'}"><a th:href="@{/teams/teamAskBoard/teamAskBoardDetail(tano=${teamaskboard.tano}, tno=${team.tno})}" style="text-decoration: none;"
									th:text="${teamaskboard.teamAskSubject}"></a></th>																
								<th th:id="writer+${teamaskboard.tano}" th:text="${teamaskboard.member.nickname}"></th>
								<th th:text="${teamaskboard.teamAskDate}"></th>
								<th th:text="${teamaskboard.teamAskReadCount}"></th>	
							</div>
							<div th:if="${teamaskboard.teamAskDelete.toString == 'TRUE'}">
								<th colspan="5" style="text-align: center;">ì‚­ì œëœ ê²Œì‹œê¸€ì…ë‹ˆë‹¤.</th>
							</div>					
							</tr>						
						</tbody>
					</table>
			
					<div th:if="${teamAsks.totalElements != 0}">
					<nav aria-label="Page navigation example">
						<ul class="pagination justify-content-center">
							<li class="page-item" th:classappend="${1 == teamAsks.pageable.pageNumber + 1} ? 'disabled'">
								<a class="page-link" href="#" th:href="@{/teams/teamAskBoard(page=${teamAsks.pageable.pageNumber - 1}, tno=${team.tno})}" tabindex="-1" aria-disabled="true">Previous</a>
							</li>
							<li class="page-item" th:classappend="${i == teamAsks.pageable.pageNumber + 1} ? 'disabled'" th:each="i : ${#numbers.sequence(startPage, endPage)}">
								<a class="page-link" href="#" th:href="@{/teams/teamAskBoard(page=${i - 1}, tno=${team.tno})}" th:text="${i}">1</a>
							</li>
							<li class="page-item" th:classappend="${teamAsks.totalPages == teamAsks.pageable.pageNumber + 1} ? 'disabled'">
								<a class="page-link" href="#" th:href="@{/teams/teamAskBoard(page=${teamAsks.pageable.pageNumber + 1}, tno=${team.tno})}">Next</a>
							</li>
						</ul>
					</nav>
					</div>
					<div align="center">
						<a th:href="@{/teams/teamAskBoard/teamAskBoardWriteForm(tno=${team.tno})}" class="btn">ê¸€ì“°ê¸°</a>
					</div>
				</div>
			</section>
		</div>
	</th:block>
</body>
</html>