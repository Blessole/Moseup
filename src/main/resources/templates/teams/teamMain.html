<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layouts/layout}">
<head>
	<title>Insert title here</title>
	<link rel="stylesheet" href="/css/teamMain.css" />
	<script type="text/javascript">
	function checkMoney(tno, result){	
		if (result == 1) {
			alert('가입을 축하드립니다! 열심히 하세요!');
			location.href="/teams/teamPage/joinTeam?tno="+tno;			
		} else if (result == -1) {
			alert('예치금이 부족하여 가입할 수 없습니다. 돈 충전 해 와!');
		}
	}
	</script>
</head>
<body>
<th:block layout:fragment="content">
	<div id="page-wrapper">

		<!-- Header -->
		<section id="header">
			<div class="backgrond"></div>
			<div class="container">
			
				<!-- Logo -->
				<h1 th:text="${team.teamName}"></h1>
				<p>for the sake of everyone's habits.</p>
			
				<!-- Nav -->
				<nav id="nav">
					<ul>
						<li id="introduce"><a th:href="@{/teams/teamPage(tno=${team.tno})}"><span>소개</span></a></li>
						<li id="ask"><a th:href="@{/teams/teamAskBoard(tno=${team.tno})}"><span>문의하기</span></a></li>
						<li id="check"><a th:href="@{/teams/teamCheckBoard(tno=${team.tno})}"><span>인증게시판</span></a></li>
						<li id="list"><a th:href="@{/teams/teamMemberList(tno=${team.tno})}"><span>가입 회원</span></a></li>
					</ul>
				</nav>				
			</div>
		</section>
		<br>

		<!-- Features -->
		<section id="features">
			<div class="container">
				<div>
					<div>
						<section>
							<img th:src="'/'+'images/teamPhotos/'+${team.teamName}+'/'+${team.teamPhoto}" th:alt="팀사진" style="margin-bottom: 30px; width: 70%; height: 400px;"/>
							<div id="team_name">🚩팀명 :&nbsp;<p th:text="${team.teamName}"></p></div>
							<div id="team_date">⏰팀 생성일 :&nbsp;<p th:text="${team.teamDate}"></p></div>
							<div id="team_volume">‍👨‍👩‍👧‍👧가입 인원 :&nbsp;<p th:text="${team.teamMembers.size}"></p>/<p th:text="${team.teamVolume}"></p></div>
							<div id="team_period">📅기간 :&nbsp;<p th:text="${team.startDate}"></p>&nbsp;~&nbsp;<p th:text="${team.endDate}"></p></div>
							<div id="team_category">✅분류 :&nbsp;<p th:text="${team.teamCategory1}+','"></p>
														  <p th:if="${team.teamCategory3 != null}" th:text="${team.teamCategory2}+','"></p>
														  <p th:if="${team.teamCategory3 == null}" th:text="${team.teamCategory2}"></p>
														  <p th:text="${team.teamCategory3}"></p></div>
							<div id="team_deposit">💵예치금 :&nbsp;<p th:text="'￦'+${team.teamDeposit}*10000"></p></div>
						</section>
					</div>
					<div id="introduce">
						<p th:text="${team.teamIntroduce}"></p>
					</div>				
				</div>
			</div>
			<div th:if="${principal} == null">
				<a th:href="@{/members/login}" class="btn">가입하기</a>
			</div>			
			<div th:if="${principal == 1}">
				<div id="jointeam" th:if="${teamMember.isEmpty()}">
					<a th:onclick="|javascript:checkMoney('${team.tno}','${result}')|" class="btn">가입하기</a>
				</div>
				<div id="jointeam" th:if="${!teamMember.isEmpty()}">
					<p th:if="${teamMemberDetail.teamMemberDelete.toString != 'TRUE'}">이미 가입한 스터디 입니다.</p>
					<p th:if="${teamMemberDetail.teamMemberDelete.toString == 'TRUE'}">재가입 불가합니다. 수고링!</p>
				</div>
				<div th:if="${team.teamLeader == member.nickname}">
					<a th:href="@{/teams/teamBankBook(tno=${team.tno})}" class="btn">팀 통장</a>
				</div>
			</div>
			<div>
				<a th:href="@{/teams/likes(tno=${team.tno})}" class="btn">좋아요</a>
			</div>

			<div th:if="${principal == 1}">
				<div id="jointeam" th:if="${teamMember.isEmpty()}">
					<a th:href="@{/teams/teamPage/joinTeam(tno=${team.tno})}" class="btn btn-success">가입하기</a>
				</div>
				<div id="jointeam" th:if="${!teamMember.isEmpty()}">
					<p th:if="${teamMemberDetail.teamMemberDelete} != t">이미 가입한 스터디 입니다.</p>
					<p th:if="${teamMemberDetail.teamMemberDelete} == t">재가입 불가합니다. 수고링!</p>
				</div>
			</div>
		</section>
	</div>
</th:block>
</body>
</html>