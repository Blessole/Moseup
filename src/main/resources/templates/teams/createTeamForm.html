<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link th:href="@{/css/createTeamForm.css}" rel="stylesheet" type="text/css" />
</head>
<body>
	<!-- 본문 코드 시작 -->
	<th:block layout:fragment="content">

		<div class="mainContainer">
			<div class="col-md-7 col-lg-8 formContainer">
				<h4 class="mb-3 text-center">팀 생성</h4>
				<form class="needs-validation" role="form" action="/teams/createTeam"  th:object="${teamForm}" method="post">
					<div class="row g-3">
						<div class="col-12">
							<label for="teamName" class="form-label">팀명</label>
							<div class="input-group has-validation">
								<input type="text" class="form-control" th:field="*{teamName}" id="teamName" placeholder="teamName" required>

							</div>
						</div>

						<div class="col-12">
							<label for="teamVolume" class="form-label">모집 인원</label><br>
							<input type="range" name="points" th:field="*{teamVolume}" id="teamVolume" min="2" max="100" required>
							<div id="teamVolumeValue" align="center"></div>
						</div>

						<div class="col-12">
							<label for="teamDeposit" class="form-label">예치금</label>
							<select class="form-select" th:field="*{teamDeposit}" id="teamDeposit" required>
								<option value="0">==인당==</option>
								<option value="1">10,000￦</option>
								<option value="2">20,000￦</option>
								<option value="3">30,000￦</option>
								<option value="4">40,000￦</option>
								<option value="5">50,000￦</option>
								<option value="6">60,000￦</option>
								<option value="7">70,000￦</option>
								<option value="8">80,000￦</option>
								<option value="9">90,000￦</option>
								<option value="10">100,000￦</option>
							</select>
							
						</div>

						<div class="col-12">
							<label for="startDate" class="form-label">습관 시작일</label>
							<input type="date" class="form-control" th:field="*{startDate}" id="startDate" required>
							
						</div>

						<div class="col-12">
							<label for="endDate" class="form-label">습관 종료일</label>
							<input type="date" class="form-control" th:field="*{endDate}" id="endDate" required>
							
						</div>
						
						<div class="col-12">
							<label for="teamPhoto" class="form-label">팀 소개 사진</label>
							<input type="file"	class="form-control" th:field="*{teamPhoto}" id="teamPhoto">
							
						</div>

						<div class="col-12">
							<label for="teamIntroduce" class="form-label">팀 소개 글</label>  (<span id="nowByte">0</span>/1000bytes)
							<textarea  class="form-control" rows="8" cols="82" th:field="*{teamIntroduce}" id="teamIntroduce"
											placeholder="팀 소개 내용을 입력하세요. (1000bytes)" required onkeyup="fn_checkByte(this)"></textarea>
						</div>
					</div>

					<hr class="my-4">

					<button class="w-100 btn btn-primary btn-lg" type="submit">팀 생성하기</button>
				</form>
			</div>
		</div>
		
		<script type="text/javascript">
			/* 모집 인원 값 보여주는 함수 */
			var slider = document.getElementById("teamVolume");
			var output = document.getElementById("teamVolumeValue");
			output.innerHTML = slider.value + "명";
			
			slider.oninput = function() {
			    output.innerHTML = this.value + "명";
			}
			
			//textarea 바이트 수 체크하는 함수
		    function fn_checkByte(obj){
		        const maxByte = 1000; //최대 1000바이트
		        const text_val = obj.value; //입력한 문자
		        const text_len = text_val.length; //입력한 문자수

		        let totalByte=0;
		        for(let i=0; i<text_len; i++){
		            const each_char = text_val.charAt(i);
		            const uni_char = escape(each_char) //유니코드 형식으로 변환
		            if(uni_char.length>4){
		                // 한글 : 2Byte
		                totalByte += 2;
		            }else{
		                // 영문,숫자,특수문자 : 1Byte
		                totalByte += 1;
		            }
		        }
		        
		        if(totalByte>maxByte){
		            alert('최대 1000Byte까지만 입력가능합니다.');
		            document.getElementById("nowByte").innerText = totalByte;
		            document.getElementById("nowByte").style.color = "red";
		        }else{
		            document.getElementById("nowByte").innerText = totalByte;
		            document.getElementById("nowByte").style.color = "black";
		        }
		    }
		</script>
</body>
</html>